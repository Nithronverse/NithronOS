# NithronOS override for nfs-server.service
[Service]
# Ensure proper restart on failure
Restart=on-failure
RestartSec=5s

# Create runtime directories
RuntimeDirectory=nfs
RuntimeDirectoryMode=0755

# Security hardening
ProtectSystem=strict
ProtectHome=no
ReadWritePaths=/srv/shares /var/lib/nfs /run/nfs
ReadWritePaths=/etc/exports.d /etc/exports

# Ensure service starts after network
[Unit]
After=network-online.target
Wants=network-online.target
