# NithronOS override for smbd.service
[Service]
# Ensure proper restart on failure
Restart=on-failure
RestartSec=5s

# Create runtime directories
RuntimeDirectory=samba
RuntimeDirectoryMode=0755
StateDirectory=samba
StateDirectoryMode=0755

# Security hardening
PrivateTmp=yes
ProtectSystem=strict
ProtectHome=no
ReadWritePaths=/srv/shares /var/lib/samba /var/cache/samba /run/samba
ReadWritePaths=/etc/samba/smb.conf.d

# Ensure service starts after network
[Unit]
After=network-online.target
Wants=network-online.target
