#!/bin/bash
set -e

# Services should already be enabled by earlier hooks, just verify
# sanity: print unit files exist and wanted symlinks are created  
systemctl is-enabled nos-tls-gen caddy nosd nos-agent nithronos-firstboot || true

if command -v curl >/dev/null 2>&1; then
  # Basic smoke: UI HTML and setup state JSON
  curl -sf http://127.0.0.1/ >/dev/null || true
  curl -sf http://127.0.0.1/api/setup/state >/dev/null || true
fi

