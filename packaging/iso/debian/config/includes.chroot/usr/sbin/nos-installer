#!/bin/bash
# NithronOS Installer
# Placeholder for the full installer implementation

set -e

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# ASCII Art Header
clear
cat << "EOF"
================================================================================
     _   _ _ _   _                   ___  ____  
    | \ | (_) |_| |__  _ __ ___  _ __/ _ \/ ___| 
    |  \| | | __| '_ \| '__/ _ \| '_ \ | | \___ \ 
    | |\  | | |_| | | | | | (_) | | | |_| |___) |
    |_| \_|_|\__|_| |_|_|  \___/|_| |_\___/____/ 
                                                  
    NithronOS Installer - v1.0
================================================================================
EOF

echo ""
echo -e "${YELLOW}Welcome to the NithronOS Installer!${NC}"
echo ""
echo "This installer will guide you through the process of installing NithronOS"
echo "on your system. The installation will:"
echo ""
echo "  • Partition your selected disk"
echo "  • Create Btrfs filesystem with optimized subvolumes"
echo "  • Install the NithronOS base system"
echo "  • Configure bootloader (GRUB)"
echo "  • Set up initial system configuration"
echo ""
echo -e "${RED}WARNING: This will ERASE all data on the selected disk!${NC}"
echo ""

# Check if running as root
if [ "$EUID" -ne 0 ]; then 
    echo -e "${RED}Error: This installer must be run as root (use sudo)${NC}"
    exit 1
fi

# Check if running in install mode
if ! grep -q "nos.install=1" /proc/cmdline 2>/dev/null; then
    echo -e "${YELLOW}Note: System was not booted in install mode.${NC}"
    echo "For best results, select 'Install NithronOS' from the boot menu."
    echo ""
fi

echo -e "${BLUE}========================================${NC}"
echo -e "${BLUE}     INSTALLER NOT YET IMPLEMENTED      ${NC}"
echo -e "${BLUE}========================================${NC}"
echo ""
echo "The full NithronOS installer is currently under development."
echo ""
echo "For now, you can explore the live system and use it to:"
echo "  • Test hardware compatibility"
echo "  • Access the web interface (check console for OTP)"
echo "  • Explore NithronOS features"
echo ""
echo "To manually install NithronOS:"
echo "  1. Partition your disk (fdisk/parted)"
echo "  2. Create Btrfs filesystem"
echo "  3. Copy system files from the live environment"
echo "  4. Install GRUB bootloader"
echo "  5. Configure /etc/fstab"
echo ""
echo "Full installer coming in a future release!"
echo ""
echo -e "${GREEN}Press Enter to return to the shell...${NC}"
read -r

echo ""
echo "Thank you for trying NithronOS!"
echo "Visit https://github.com/Nithronverse/NithronOS for updates."
echo ""
